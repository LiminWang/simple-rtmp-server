<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Simple-rtmp-server : simple rtmp origin live server over state-threads." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Simple-rtmp-server</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/winlinvip/simple-rtmp-server">View on GitHub</a>

          <h1 id="project_title">Simple-rtmp-server</h1>
          <h2 id="project_tagline">simple rtmp origin live server over state-threads.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/winlinvip/simple-rtmp-server/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/winlinvip/simple-rtmp-server/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="simple-rtmp-server" class="anchor" href="#simple-rtmp-server"><span class="octicon octicon-link"></span></a>simple-rtmp-server</h1>

<p>srs(simple rtmp origin live server) over state-threads.<br>
srs is a simple, high-performance, running in single process, origin live server.<br>
blog: <a href="http://blog.csdn.net/win_lin">http://blog.csdn.net/win_lin</a> <br>
see also: <a href="https://github.com/winlinvip/simple-rtmp-server">https://github.com/winlinvip/simple-rtmp-server</a> <br>
see also: <a href="http://winlinvip.github.io/simple-rtmp-server">http://winlinvip.github.io/simple-rtmp-server</a></p>

<h3>
<a name="authors" class="anchor" href="#authors"><span class="octicon octicon-link"></span></a>Authors</h3>

<p>winlin(winterserver): <a href="http://blog.csdn.net/win_lin">http://blog.csdn.net/win_lin</a></p>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>step 1: build srs <br></p>

<pre>
tar xf simple-rtmp-server-*.*.tar.gz
cd simple-rtmp-server-*.*/trunk
./configure --with-ssl --with-hls
make
</pre>

<p>step 2: start srs <br></p>

<pre>
./objs/simple_rtmp_server -c conf/srs.conf
</pre>

<p>step 3(optional): start nginx for HLS <br></p>

<pre>
sudo ./objs/nginx/sbin/nginx
</pre>

<p>step 4: publish live stream <br></p>

<pre>
FMS URL: rtmp://127.0.0.1:1935/live
Stream:  livestream
For example, use ffmpeg to publish:
    ffmpeg -re -i source.flv -vcodec copy -acodec copy \
    -f flv -y rtmp://127.0.0.1:1935/live/livestream
</pre>

<p>step 5: play live stream <br></p>

<pre>
rtmp url: rtmp://127.0.0.1:1935/live/livestream
m3u8 url: http://127.0.0.1:80/live/livestream.m3u8
</pre>

<h3>
<a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h3>

<ol>
<li>simple: also stable enough.<br>
</li>
<li>high-performance: single-thread, async socket, event/st-thread driven.<br>
</li>
<li>no edge server, origin server only.<br>
</li>
<li>no vod streaming, live streaming only.<br>
</li>
<li>no multiple processes, single process only.<br>
</li>
<li>support vhost, support __defaultVhost__.<br>
</li>
<li>support adobe rtmp live streaming.<br>
</li>
<li>support apple hls(m3u8) live streaming.<br>
</li>
<li>support reload config to enable changes.<br>
</li>
<li>support cache last gop for flash player to fast startup.<br>
</li>
<li>support listen at multiple ports.<br>
</li>
<li>support long time(&gt;4.6hours) publish/play.<br>
</li>
<li>high performace, 1800 connections(500kbps), 900Mbps, CPU 90.2%, 41MB<br>
</li>
<li>support forward publish stream to build active-standby cluster.<br>
</li>
<li>support broadcast by forward the stream to other servers(origin/edge).<br>
</li>
<li>[plan] support live stream transcoding by ffmpeg.<br>
</li>
<li>[plan] support full http callback api.<br>
</li>
<li>[plan] support network based cli and json result.<br>
</li>
<li>[plan] support bandwidth test api and flash client.<br>
</li>
<li>[plan] support adobe flash refer/token/swf verification.<br>
</li>
<li>[plan] support adobe amf3 codec.<br>
</li>
<li>[plan] support dvr(record live to vod file)<br>
</li>
<li>[plan] support FMS edge protocol<br>
</li>
<li>[plan] support encryption: RTMPE/RTMPS, HLS DRM<br>
</li>
<li>[plan] support RTMPT, http to tranverse firewalls<br>
</li>
</ol><h3>
<a name="performance" class="anchor" href="#performance"><span class="octicon octicon-link"></span></a>Performance</h3>

<ol>
<li>300 connections, 150Mbps, 500kbps, CPU 18.8%, 5956KB.</li>
<li>600 connections, 300Mbps, 500kbps, CPU 32.1%, 9808KB.</li>
<li>900 connections, 450Mbps, 500kbps, CPU 49.9%, 11MB.</li>
<li>1200 connections, 600Mbps, 500kbps, CPU 72.4%, 15MB.</li>
<li>1500 connections, 750Mbps, 500kbps, CPU 81.9%, 28MB.</li>
<li>1800 connections, 900Mbps, 500kbps, CPU 90.2%, 41MB.
<pre>
----total-cpu-usage---- -dsk/total- ---net/lo-- ---paging-- ---system--
usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw 
58   9  32   0   0   1|   0  4168k| 277M  277M|   0     0 |  29k   25k
61   8  30   0   0   1|   0  1168k| 336M  336M|   0     0 |  29k   24k
63   8  27   0   0   1|   0  2240k| 124M  124M|   0     0 |  32k   33k
62   8  28   0   0   1|   0  1632k| 110M  110M|   0     0 |  31k   33k
67   9  23   0   0   2|   0  1604k| 130M  130M|   0     0 |  33k   32k
63   9  27   0   0   2|   0  1496k| 145M  145M|   0     0 |  32k   32k
61   9  29   0   0   1|   0  1112k| 132M  132M|   0     0 |  32k   33k
63   9  27   0   0   2|   0  1220k| 145M  145M|   0     0 |  32k   33k
53   7  40   0   0   1|   0  1360k| 115M  115M|   0     0 |  24k   26k
51   7  41   0   0   1|   0  1184k| 146M  146M|   0     0 |  24k   27k
39   6  54   0   0   1|   0  1284k| 105M  105M|   0     0 |  22k   28k
41   6  52   0   0   1|   0  1264k| 116M  116M|   0     0 |  25k   28k
48   6  45   0   0   1|   0  1272k| 143M  143M|   0     0 |  27k   27k
</pre>
</li>
</ol><h3>
<a name="releases" class="anchor" href="#releases"><span class="octicon octicon-link"></span></a>Releases</h3>

<ul>
<li>2013-11-29, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.6">release v0.6</a>, support forward stream to origin/edge. 16094 lines.<br>
</li>
<li>2013-11-26, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.5">release v0.5</a>, support HLS(m3u8), fragment and window. 14449 lines.<br>
</li>
<li>2013-11-10, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.4">release v0.4</a>, support reload config, pause, longtime publish/play. 12500 lines.<br>
</li>
<li>2013-11-04, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.3">release v0.3</a>, support vhost, refer, gop cache, listen multiple ports. 11773 lines.<br>
</li>
<li>2013-10-25, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.2">release v0.2</a>, support rtmp flash publish, h264, time jitter correct. 10125 lines.<br>
</li>
<li>2013-10-23, <a href="https://github.com/winlinvip/simple-rtmp-server/releases/tag/0.1">release v0.1</a>, support rtmp FMLE/FFMPEG publish, vp6. 8287 lines.<br>
</li>
<li>2013-10-17, created.<br>
</li>
</ul><h3>
<a name="compare" class="anchor" href="#compare"><span class="octicon octicon-link"></span></a>Compare</h3>

<ul>
<li>srs v0.6: 16094 lines.<br>
</li>
<li>srs v0.5: 14449 lines.<br>
</li>
<li>srs v0.4: 12500 lines.<br>
</li>
<li>srs v0.3: 11773 lines.<br>
</li>
<li>srs v0.2: 10125 lines.<br>
</li>
<li>srs v0.1: 8287 lines.<br>
</li>
<li>nginx-rtmp v1.0.4: 26786 lines <br>
</li>
<li>nginx v1.5.0: 139524 lines <br>
</li>
</ul><h3>
<a name="history" class="anchor" href="#history"><span class="octicon octicon-link"></span></a>History</h3>

<ul>
<li>v0.6, 2013-11-29, v0.6 released. 16094 lines.</li>
<li>v0.6, 2013-11-29, add performance summary, 1800 clients, 900Mbps, CPU 90.2%, 41MB.</li>
<li>v0.6, 2013-11-29, support forward stream to other edge server.</li>
<li>v0.6, 2013-11-29, support forward stream to other origin server.</li>
<li>v0.6, 2013-11-28, fix memory leak bug, aac decode bug.</li>
<li>v0.6, 2013-11-27, support --with or --without -hls and -ssl options.</li>
<li>v0.6, 2013-11-27, support AAC 44100HZ sample rate for iphone, adjust the timestamp.</li>
<li>v0.5, 2013-11-26, v0.5 released. 14449 lines.</li>
<li>v0.5, 2013-11-24, support HLS(m3u8), fragment and window.</li>
<li>v0.5, 2013-11-24, support record to ts file for HLS.</li>
<li>v0.5, 2013-11-21, add ts_info tool to demux ts file.</li>
<li>v0.5, 2013-11-16, add rtmp players(OSMF/jwplayer5/jwplayer6).</li>
<li>v0.4, 2013-11-10, v0.4 released. 12500 lines.</li>
<li>v0.4, 2013-11-10, support config and reload the pithy print.</li>
<li>v0.4, 2013-11-09, support reload config(vhost and its detail).</li>
<li>v0.4, 2013-11-09, support reload config(listen and chunk_size) by SIGHUP(1).</li>
<li>v0.4, 2013-11-09, support longtime(&gt;4.6hours) publish/play.</li>
<li>v0.4, 2013-11-09, support config the chunk_size.</li>
<li>v0.4, 2013-11-09, support pause for live stream.</li>
<li>v0.3, 2013-11-04, v0.3 released. 11773 lines.</li>
<li>v0.3, 2013-11-04, support refer/play-refer/publish-refer.</li>
<li>v0.3, 2013-11-04, support vhosts specified config.</li>
<li>v0.3, 2013-11-02, support listen multiple ports.</li>
<li>v0.3, 2013-11-02, support config file in nginx-conf style.</li>
<li>v0.3, 2013-10-29, support pithy print log message specified by stage.</li>
<li>v0.3, 2013-10-28, support librtmp without extended-timestamp in 0xCX chunk packet.</li>
<li>v0.3, 2013-10-27, support cache last gop for client fast startup.</li>
<li>v0.2, 2013-10-25, v0.2 released. 10125 lines.</li>
<li>v0.2, 2013-10-25, support flash publish.</li>
<li>v0.2, 2013-10-25, support h264/avc codec by rtmp complex handshake.</li>
<li>v0.2, 2013-10-24, support time jitter detect and correct algorithm</li>
<li>v0.2, 2013-10-24, support decode codec type to cache the h264/avc sequence header.</li>
<li>v0.1, 2013-10-23, v0.1 released. 8287 lines.</li>
<li>v0.1, 2013-10-23, support basic amf0 codec, simplify the api using c-style api.</li>
<li>v0.1, 2013-10-23, support shared ptr msg for zero memory copy.</li>
<li>v0.1, 2013-10-22, support vp6 codec with rtmp protocol specified simple handshake.</li>
<li>v0.1, 2013-10-20, support multiple flash client play live streaming.</li>
<li>v0.1, 2013-10-20, support FMLE/FFMPEG publish live streaming.</li>
<li>v0.1, 2013-10-18, support rtmp message2chunk protocol(send_message).</li>
<li>v0.1, 2013-10-17, support rtmp chunk2message protocol(recv_message).</li>
</ul><p>beijing, 2013
Winlin</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Simple-rtmp-server maintained by <a href="https://github.com/winlinvip">winlinvip</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
